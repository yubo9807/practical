import{c as F,d as O,h as t,u as v,a as b,j as M,b as T,n as B,l as I,L as W}from"./pl-react-3e11a3c7.js";import{p as H}from"./@babel-9b7716b4.js";import{i as P,C as E,M as V,a as A,d as U,b as q}from"./index-0b44822d.js";import{D as J}from"./basic-fc70e6c7.js";import{t as R}from"./source-054764a1.js";function _(l){const{slotHeader:c,title:o,children:f,slotFotter:i,className:p,ref:g,...N}=l,u=F();function h(){u.current.close()}return O(g,()=>u.current,[]),t(J,{ref:u,...N,className:["br-dialog-layer",...[p].flat()]},c?t("header",{className:"dialog-header"},c):t("header",{className:"dialog-header"},t("h2",{className:"title"},o),t("span",{className:"close",onclick:h},"x")),t("main",{className:"dialog-main"},...f),t("footer",{className:"dialog-footer"},i))}const z="source-code-demo-14a44d",G="navigation-07d6b8",K="content-f8ec98",Q="preview-0e0754",j={"source-code-demo":"source-code-demo-14a44d",sourceCodeDemo:z,navigation:G,content:K,preview:Q};const X=l=>{const[c,o]=v([]),f={Number(e){return t("span",{className:"number"},e)},String(e){return t("span",{className:"string"},e)},Boolean(e){return t("span",{className:"boolean"},e+"")},Symbol(e){return t("span",{className:"symbol"},e.toString())},Bigint(e){return t("span",{className:"bigint"},e+"n")},Undefined(e){return t("span",{className:"undefined"},e+"")},Null(e){return t("span",{className:"null"},e+"")},RegExp(e){return t("span",{className:"regexp"},e.toString())},Date(e){return t("span",{className:"date"},e.toString())},Object(e){let n="";for(const s in e)n+=`${s}: ${e[s]}, `;return t("span",{className:"object"},`{ ${n.slice(0,-2)} }`)},Array(e){return t("span",{className:"array"},`[${e.join(", ")}]`)},Function(e){return t("span",{className:"function"},e.toString())},Promise(e){return t("span",{className:"promise"},e.toString())},Set(e){let n="";for(const s of e)n+=`${s},`;return t("span",{className:"set"},`Set {${n.slice(0,-1)}}'`)},Map(e){let n="";for(const[s,m]of e)n+=`${this.value(s)}: ${this.value(m)}, `;return t("span",{className:"map"},`Map {${n.slice(0,-2)}}`)},WeakSet(e){return t("span",{className:"weakset"},e.toString())},WeakMap(e){return t("span",{className:"weakmap"},e.toString())},WeakRef(e){return t("span",{className:"weakref"},e.toString())},Error(e){return t("span",{className:"error"},e.stack)}};function i(...e){if(e.length===0)return;const n=[];for(const s of e){let m=P(s);f[m]||(m="Object");const x=f[m](s);n.push(x)}return n}const p=[...c];function g(...e){p.push(i(...e)),o(p)}b(()=>{const e=console.log;return console.log=(...n)=>{g(...n),e(...n)},()=>{console.log=e}}),O(l.ref,()=>({log:g,clear(){p.length=0,o([])}}));const[N,u]=v("");function h(e){u(e.target.value)}function k(e){if(e.keyCode===13){const n=e.target.value.replace(/\n|(\n')$/,"");if(!n)return;u("");try{const s=new Function("return "+n)();o([...c,i(s)])}catch(s){o([...c,i(s)])}}}return t("div",{className:"console"},t("ul",null,...c.map(e=>t("li",null,t("span",{className:"result"},"<")," ",...e))),t("div",{className:"last-line"},t("span",{className:"input"},">")," ",t("textarea",{value:N,oninput:h,rows:1,placeholder:"console...",onkeyup:k})))},se=l=>{const c=M(U),[o,f]=v([]),[i,p]=v({code:"",demo:"",readme:""});function g(a){const S=H(a,{sourceType:"module",plugins:["typescript"]}).program.body.find(r=>r.type==="ExportDefaultDeclaration");if(!S)return a;const w=S.loc.start.line-1,$=S.loc.end.line-1;let D="";const C=a.split(`
`);for(let r=0;r<C.length;r++)[w,$].includes(r)||(D+=C[r].replace(/\s\s/,"")+`
`);return D}const N=F(),u=T(l.getSource,[]);async function h(a){const y=await u;!o.length&&f(y.map(d=>({name:d.name,title:d.title})));const S=y.find(d=>d.name===a)||y[0],{exec:w,code:$,demo:D,readme:C}=S,r={code:$,demo:g(D),readme:C};c.state.codeLanguage==="js"&&(r.code=R($),r.demo=R(r.demo)),p(r),B(()=>{N.current.clear();const d=document.getElementById("container");d.innerHTML="",d.setAttribute("style",""),w&&w()})}const k=I();b(()=>k.monitor(async a=>{if(!a.path.startsWith(l.path))return;const y=a.path.replace(l.path+"/","");h(y)}),[]);const[e,n]=v(!0);b(()=>{if(e){n(!1);return}const a=k.current.path.replace(l.path+"/","");h(a)},[c.state.codeLanguage]);const[s,m]=v(!1),L=()=>t("ul",{className:j.navigation},...o.map(a=>t("li",null,t(W,{className:"text-ellipsis",to:`${l.path}/${a.name}`},a.title||a.name)))),x=M(q);return b(()=>{o.length&&x.dispatch({type:"menuSet",payload:L()})},[o]),b(()=>()=>{x.dispatch({type:"menuClear"})},[]),t(A,{className:j.sourceCodeDemo},t("aside",null,L()),t("section",{className:j.content},t("h2",null,"Preview"),t("div",{className:j.preview},t("div",{id:"container"}),t(X,{ref:N})),t(_,{open:s,onClose:m,title:"源码实现",style:"width: 1000px"},t(E,{value:i.code})),t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},t("h2",null,"Use"),t("a",{onclick:()=>m(!0)},"源码实现")),t(E,{value:i.demo}),t("h2",null),t(V,{text:i.readme})))};export{se as S};
