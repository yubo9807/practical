import{p as F}from"./@babel-9b7716b4.js";import{j as C,u as d,b as N,a,c as T,h as s,l as D,L as R}from"./pl-react-3e11a3c7.js";import{C as j,a as q,s as B,d as M,b as V}from"./index-0b44822d.js";import{t as $,a as I,b as J}from"./source-054764a1.js";import"./debug-ddf39923.js";import"./ms-f6814399.js";import"./globals-aa9f7777.js";import"./@jridgewell-3b082fb9.js";import"./jsesc-4cfd8464.js";import"./picocolors-cddfbdbe.js";import"./js-tokens-bc2e8ff2.js";import"./marked-4b92e03d.js";const K="page-utils-f86c23",P="navigation-62969b",W="content-bea58d",Y="outline-690e4e",_="total-307071",i={"page-utils":"page-utils-f86c23",pageUtils:K,navigation:P,content:W,outline:Y,total:_},ot=S=>{const m=C(M),[l,E]=d([]),[c,w]=d(""),k=N(I,[]);async function f(t){const{keys:e,body:n}=await k;!l.length&&E(e);const r=e.find(p=>p===t);let o=n[r||e[0]];m.state.codeLanguage==="js"&&(o=$(o)),w(o)}const g=D();a(()=>g.monitor(async t=>{if(!t.path.startsWith(S.path))return;const e=t.path+".ts";f(e)}),[]);const[v,x]=d(!0);a(()=>{if(v){x(!1);return}const t=g.current.path+".ts";f(t)},[m.state.codeLanguage]);const u=N(()=>{const t=F(c,{sourceType:"module",plugins:["typescript"]}),e=[];for(const n of t.program.body)if(n.type==="ExportNamedDeclaration"&&["FunctionDeclaration","ClassDeclaration"].includes(n.declaration.type)){const{loc:r,declaration:o}=n,{start:p,end:U}=r;e.push({start:p.line,end:U.line,name:o.id.name})}return e},[c]),y=T();function L(t){const e=y.current.getEl().getElementsByClassName("row-num")[0].childNodes;for(const n of e)if(n.getElementsByTagName("label")[0].textContent===t+""){B(n);break}}const h=()=>s("ul",{className:i.navigation},...l.map(t=>{const e=t.split("/")[2].replace(".ts","");return s("li",null,s(R,{to:t.split(".")[0]},e))})),b=C(V);return a(()=>{l.length&&b.dispatch({type:"menuSet",payload:h()})},[l]),a(()=>()=>{b.dispatch({type:"menuClear"})},[]),a(()=>{const t="$utils";return window[t]=J(),()=>{delete window[t]}},[]),s(q,{className:i.pageUtils},s("aside",null,h()),s("section",{className:i.content},s(j,{ref:y,value:c,lines:u})),s("aside",{className:i.outline},s("ul",null,...u.map(t=>s("li",{onclick:()=>L(t.start)},t.name))),s("div",{className:i.total},"total: ",u.length)))};export{ot as default};
