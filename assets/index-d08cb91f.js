import{g as T,j as I,h as e,u as g,a as k,k as B,n as C,l as M,b as R,m as j,L as F,e as $}from"./pl-react-68daa512.js";import{p as q}from"./@babel-cd739a4a.js";import{C as w,t as L}from"./source-e75793bf.js";import{B as A}from"./basic-690640d8.js";import{p as O}from"./marked-188a4671.js";import{s as P}from"./index-1d8c8882.js";function W(a){const{slotHeader:n,title:r,children:l,slotFotter:o,className:i,ref:d,...f}=a,m=T();function h(){m.current.close()}return I(d,()=>m.current,[]),e(A,{ref:m,...f,className:["br-dialog-layer",...[i].flat()]},n?e("header",{className:"dialog-header"},n):e("header",{className:"dialog-header"},e("h2",{className:"title"},r),e("span",{className:"close",onclick:h},"x")),e("main",{className:"dialog-main"},...l),e("footer",{className:"dialog-footer"},o))}const J=a=>{const[n,r]=g("");k(async()=>{const i=await O(a.text);r(i)},[a.text]);const l=T(),o=M();return B(async()=>{C(()=>{[...l.current.querySelectorAll("pre code")].forEach(d=>{const f=o.render(e(w,{value:d.textContent}));d.parentElement.replaceWith(f[0])})})},[n]),e("div",{ref:l,className:["markdown",...[a.className].flat()],innerHTML:n})},U="page-tools-5625ed",V="navigation-07d6b8",_="content-f8ec98",b={"page-tools":"page-tools-5625ed",pageTools:U,navigation:V,content:_},Z=a=>{const[n]=R(P),[r,l]=g([]),[o,i]=g({code:"",demo:"",readme:""});function d(t){const p=q(t,{sourceType:"module",plugins:["typescript"]}).program.body.find(s=>s.type==="ExportDefaultDeclaration");if(!p)return t;const y=p.loc.start.line-1,x=p.loc.end.line-1;let N="";const v=t.split(`
`);for(let s=0;s<v.length;s++)[y,x].includes(s)||(N+=v[s].replace(/\s\s/,"")+`
`);return N}const f=j(a.getSource,[]);async function m(t){const u=await f;!r.length&&l(u.map(c=>({name:c.name,title:c.title})));const p=u.find(c=>c.name===t)||u[0],{exec:y,code:x,demo:N,readme:v}=p,s={code:x,demo:d(N),readme:v};n.codeLanguage==="js"&&(s.code=L(x),s.demo=L(s.demo)),i(s),C(()=>{const c=document.getElementById("container");c.innerHTML="",c.setAttribute("style",""),y&&y()})}const h=$();k(()=>h.monitor(async t=>{if(!t.path.startsWith(a.path))return;const u=t.path.replace(a.path+"/","");m(u)}),[]);const[E,S]=g(!0);k(()=>{if(E){S(!1);return}const t=h.current.path.replace(a.path+"/","");m(t)},[n.codeLanguage]);const[H,D]=g(!1);return e("div",{className:b.pageTools},e("aside",null,e("ul",{className:b.navigation},...r.map(t=>e("li",null,e(F,{to:`${a.path}/${t.name}`},t.title||t.name))))),e("section",{className:b.content},e("h2",null,"Preview"),e("div",{id:"container"}),e(W,{open:H,onClose:D,title:"源码实现",style:"width: 1000px"},e(w,{value:o.code})),e("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},e("h2",null,"Use"),e("a",{onclick:()=>D(!0)},"源码实现")),e(w,{value:o.demo}),e("h2",null),e(J,{text:o.readme})))};export{Z as S};
