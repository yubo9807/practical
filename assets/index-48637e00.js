import{c as F,d as T,h as t,u as v,a as b,j as M,b as B,n as I,l as O,L as W}from"./pl-react-3e11a3c7.js";import{p as H}from"./@babel-9b7716b4.js";import{i as P,C as E,M as V,a as A,d as U,b as q}from"./index-a9be710e.js";import{D as J}from"./basic-fc70e6c7.js";import{t as R}from"./source-0be91ead.js";function _(l){const{slotHeader:c,title:o,children:f,slotFotter:i,className:m,ref:g,...N}=l,u=F();function h(){u.current.close()}return T(g,()=>u.current,[]),t(J,{ref:u,...N,className:["br-dialog-layer",...[m].flat()]},c?t("header",{className:"dialog-header"},c):t("header",{className:"dialog-header"},t("h2",{className:"title"},o),t("span",{className:"close",onclick:h},"x")),t("main",{className:"dialog-main"},...f),t("footer",{className:"dialog-footer"},i))}const z="source-code-demo-14a44d",G="navigation-07d6b8",K="content-f8ec98",Q="preview-0e0754",C={"source-code-demo":"source-code-demo-14a44d",sourceCodeDemo:z,navigation:G,content:K,preview:Q};const X=l=>{const[c,o]=v([]),f={Number(e){return t("span",{className:"number"},e)},String(e){return t("span",{className:"string"},e)},Boolean(e){return t("span",{className:"boolean"},e+"")},Symbol(e){return t("span",{className:"symbol"},e.toString())},Bigint(e){return t("span",{className:"bigint"},e+"n")},Undefined(e){return t("span",{className:"undefined"},e+"")},Null(e){return t("span",{className:"null"},e+"")},RegExp(e){return t("span",{className:"regexp"},e.toString())},Date(e){return t("span",{className:"date"},e.toString())},Object(e){let s="";for(const n in e)s+=`${n}: ${e[n]}, `;return t("span",{className:"object"},`{ ${s.slice(0,-2)} }`)},Array(e){return t("span",{className:"array"},`[${e.join(", ")}]`)},Function(e){return t("span",{className:"function"},e.toString())},Promise(e){return t("span",{className:"promise"},e.toString())},Set(e){let s="";for(const n of e)s+=`${n},`;return t("span",{className:"set"},`Set {${s.slice(0,-1)}}'`)},Map(e){let s="";for(const[n,d]of e)s+=`${this.value(n)}: ${this.value(d)}, `;return t("span",{className:"map"},`Map {${s.slice(0,-2)}}`)},WeakSet(e){return t("span",{className:"weakset"},e.toString())},WeakMap(e){return t("span",{className:"weakmap"},e.toString())},WeakRef(e){return t("span",{className:"weakref"},e.toString())},Error(e){return t("span",{className:"error"},e.stack)}};function i(...e){if(e.length===0)return;const s=[];for(const n of e){let d=P(n);f[d]||(d="Object");const k=f[d](n);s.push(k)}return s}const m=[...c];function g(...e){m.push(i(...e)),o(m)}b(()=>{const e=console.log;return console.log=(...s)=>{g(...s),e(...s)},()=>{console.log=e}}),T(l.ref,()=>({log:g,clear(){m.length=0,o([])}}));const[N,u]=v("");function h(e){if(e.keyCode===13){const s=e.target.value.replace(/\n|(\n')$/,"");if(!s)return;u("");try{const n=new Function("return "+s)();o([...c,i(n)])}catch(n){o([...c,i(n)])}}else u(e.target.value)}return t("div",{className:"console"},t("ul",null,...c.map(e=>t("li",null,t("span",{className:"result"},"<")," ",...e))),t("div",{className:"last-line"},t("span",{className:"input"},">")," ",t("textarea",{value:N,rows:1,onkeyup:h})))},ne=l=>{const c=M(U),[o,f]=v([]),[i,m]=v({code:"",demo:"",readme:""});function g(a){const S=H(a,{sourceType:"module",plugins:["typescript"]}).program.body.find(r=>r.type==="ExportDefaultDeclaration");if(!S)return a;const x=S.loc.start.line-1,w=S.loc.end.line-1;let $="";const D=a.split(`
`);for(let r=0;r<D.length;r++)[x,w].includes(r)||($+=D[r].replace(/\s\s/,"")+`
`);return $}const N=F(),u=B(l.getSource,[]);async function h(a){const y=await u;!o.length&&f(y.map(p=>({name:p.name,title:p.title})));const S=y.find(p=>p.name===a)||y[0],{exec:x,code:w,demo:$,readme:D}=S,r={code:w,demo:g($),readme:D};c.state.codeLanguage==="js"&&(r.code=R(w),r.demo=R(r.demo)),m(r),I(()=>{N.current.clear();const p=document.getElementById("container");p.innerHTML="",p.setAttribute("style",""),x&&x()})}const e=O();b(()=>e.monitor(async a=>{if(!a.path.startsWith(l.path))return;const y=a.path.replace(l.path+"/","");h(y)}),[]);const[s,n]=v(!0);b(()=>{if(s){n(!1);return}const a=e.current.path.replace(l.path+"/","");h(a)},[c.state.codeLanguage]);const[d,j]=v(!1),k=()=>t("ul",{className:C.navigation},...o.map(a=>t("li",null,t(W,{className:"text-ellipsis",to:`${l.path}/${a.name}`},a.title||a.name)))),L=M(q);return b(()=>{o.length&&L.dispatch({type:"menuSet",payload:k()})},[o]),b(()=>()=>{L.dispatch({type:"menuClear"})},[]),t(A,{className:C.sourceCodeDemo},t("aside",null,k()),t("section",{className:C.content},t("h2",null,"Preview"),t("div",{className:C.preview},t("div",{id:"container"}),t(X,{ref:N})),t(_,{open:d,onClose:j,title:"源码实现",style:"width: 1000px"},t(E,{value:i.code})),t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},t("h2",null,"Use"),t("a",{onclick:()=>j(!0)},"源码实现")),t(E,{value:i.demo}),t("h2",null),t(V,{text:i.readme})))};export{ne as S};
