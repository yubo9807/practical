import{p as F}from"./@babel-9b7716b4.js";import{c as I,d as H,h as e,j as L,u as y,b as $,a as v,n as B,l as O,L as P}from"./pl-react-3e11a3c7.js";import{D as V}from"./basic-fc70e6c7.js";import{C as M,M as q,a as A,d as J,b as U}from"./index-2b2a87b0.js";import{C as W,t as E}from"./source-ece3fdcf.js";function _(o){const{slotHeader:c,title:n,children:C,slotFotter:i,className:D,ref:b,...u}=o,l=I();function m(){l.current.close()}return H(b,()=>l.current,[]),e(V,{ref:l,...u,className:["br-dialog-layer",...[D].flat()]},c?e("header",{className:"dialog-header"},c):e("header",{className:"dialog-header"},e("h2",{className:"title"},n),e("span",{className:"close",onclick:m},"x")),e("main",{className:"dialog-main"},...C),e("footer",{className:"dialog-footer"},i))}const z="source-code-demo-14a44d",G="navigation-07d6b8",K="content-f8ec98",Q="preview-0e0754",N={"source-code-demo":"source-code-demo-14a44d",sourceCodeDemo:z,navigation:G,content:K,preview:Q},se=o=>{const c=L(J),[n,C]=y([]),[i,D]=y({code:"",demo:"",readme:""});function b(t){const d=F(t,{sourceType:"module",plugins:["typescript"]}).program.body.find(s=>s.type==="ExportDefaultDeclaration");if(!d)return t;const p=d.loc.start.line-1,f=d.loc.end.line-1;let g="";const h=t.split(`
`);for(let s=0;s<h.length;s++)[p,f].includes(s)||(g+=h[s].replace(/\s\s/,"")+`
`);return g}const u=I(),l=$(o.getSource,[]);async function m(t){const r=await l;!n.length&&C(r.map(a=>({name:a.name,title:a.title})));const d=r.find(a=>a.name===t)||r[0],{exec:p,code:f,demo:g,readme:h}=d,s={code:f,demo:b(g),readme:h};c.state.codeLanguage==="js"&&(s.code=E(f),s.demo=E(s.demo)),D(s),B(()=>{u.current.clear();const a=document.getElementById("container");a.innerHTML="",a.setAttribute("style",""),p&&p()})}const x=O();v(()=>x.monitor(async t=>{if(!t.path.startsWith(o.path))return;const r=t.path.replace(o.path+"/","");m(r)}),[]);const[R,T]=y(!0);v(()=>{if(R){T(!1);return}const t=x.current.path.replace(o.path+"/","");m(t)},[c.state.codeLanguage]);const[j,S]=y(!1),w=()=>e("ul",{className:N.navigation},...n.map(t=>e("li",null,e(P,{className:"text-ellipsis",to:`${o.path}/${t.name}`},t.title||t.name)))),k=L(U);return v(()=>{n.length&&k.dispatch({type:"menuSet",payload:w()})},[n]),v(()=>()=>{k.dispatch({type:"menuClear"})},[]),e(A,{className:N.sourceCodeDemo},e("aside",null,w()),e("section",{className:N.content},e("h2",null,"Preview"),e("div",{className:N.preview},e("div",{id:"container"}),e(W,{ref:u})),e(_,{open:j,onClose:S,title:"源码实现",style:"width: 1000px"},e(M,{value:i.code})),e("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},e("h2",null,"Use"),e("a",{onclick:()=>S(!0)},"源码实现")),e(M,{value:i.demo}),e("h2",null),e(q,{text:i.readme})))};export{se as S};
