import{p as w}from"./@babel-e08cdc44.js";import{u as C,a as m,o as N,b as c,k as D,h as s,g as F,L as R}from"./pl-react-e1980636.js";import{C as q,t as B,s as M,b as V}from"./source-8f8b1239.js";import{d as j,a as I}from"./index-e76d1a80.js";import"./debug-ddf39923.js";import"./ms-f6814399.js";import"./globals-aa9f7777.js";import"./@jridgewell-0ddd3491.js";import"./jsesc-4cfd8464.js";import"./picocolors-cddfbdbe.js";import"./js-tokens-bc2e8ff2.js";const J="page-utils-f86c23",P="navigation-62969b",W="content-bea58d",_="outline-690e4e",$="total-307071",a={"page-utils":"page-utils-f86c23",pageUtils:J,navigation:P,content:W,outline:_,total:$},et=S=>{const d=C(j),[i,k]=m([]),[r,E]=m(""),v=N(V,[]);async function f(t){const{keys:e,body:n}=await v;!i.length&&k(e);const l=e.find(p=>p===t);let o=n[l||e[0]];d.state.codeLanguage==="js"&&(o=B(o)),E(o)}const g=F();c(()=>g.monitor(async t=>{if(!t.path.startsWith(S.path))return;const e=t.path+".ts";f(e)}),[]);const[x,L]=m(!0);c(()=>{if(x){L(!1);return}const t=g.current.path+".ts";f(t)},[d.state.codeLanguage]);const u=N(()=>{const t=w(r,{sourceType:"module",plugins:["typescript"]}),e=[];for(const n of t.program.body)if(n.type==="ExportNamedDeclaration"&&["FunctionDeclaration","ClassDeclaration"].includes(n.declaration.type)){const{loc:l,declaration:o}=n,{start:p,end:U}=l;e.push({start:p.line,end:U.line,name:o.id.name})}return e},[r]),y=D();function T(t){const e=y.current.getEl().getElementsByClassName("row-num")[0].childNodes;for(const n of e)if(n.getElementsByTagName("label")[0].textContent===t+""){M(n);break}}const h=()=>s("ul",{className:a.navigation},...i.map(t=>{const e=t.split("/")[2].replace(".ts","");return s("li",null,s(R,{to:t.split(".")[0]},e))})),b=C(I);return c(()=>{i.length&&b.dispatch({type:"menuSet",payload:h()})},[i]),c(()=>()=>{b.dispatch({type:"menuClear"})},[]),s("div",{className:a.pageUtils},s("aside",null,h()),s("section",{className:a.content},s(q,{ref:y,value:r,lines:u})),s("aside",{className:a.outline},s("ul",null,...u.map(t=>s("li",{onclick:()=>T(t.start)},t.name))),s("div",{className:a.total},"total: ",u.length)))};export{et as default};
