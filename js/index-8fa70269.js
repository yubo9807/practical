import{p as F}from"./@babel-667fc88d.js";import{c as I,d as H,h as e,l as L,u as y,b as $,a as v,n as q,q as B,L as O}from"./pl-react-532112ff.js";import{D as P}from"./basic-343393ce.js";import{f as M,M as V,h as A,j as J,k as U}from"./index-2aaa6a80.js";import{a as W,t as E}from"./source-b7a3e777.js";function _(o){const{slotHeader:c,title:n,children:D,slotFotter:i,className:b,ref:x,...u}=o,l=I();function m(){l.current.close()}return H(x,()=>l.current,[]),e(P,{ref:l,...u,className:["br-dialog-layer",...[b].flat()]},c?e("header",{className:"dialog-header"},c):e("header",{className:"dialog-header"},e("h2",{className:"title"},n),e("span",{className:"close",onclick:m},"x")),e("main",{className:"dialog-main"},...D),e("footer",{className:"dialog-footer"},i))}const z="source-code-demo-14a44d",G="navigation-07d6b8",K="content-f8ec98",Q="preview-0e0754",N={"source-code-demo":"source-code-demo-14a44d",sourceCodeDemo:z,navigation:G,content:K,preview:Q};function se(o){const c=L(J),[n,D]=y([]),[i,b]=y({code:"",demo:"",readme:""});function x(t){const d=F(t,{sourceType:"module",plugins:["typescript"]}).program.body.find(s=>s.type==="ExportDefaultDeclaration");if(!d)return t;const f=d.loc.start.line-1,p=d.loc.end.line-1;let g="";const h=t.split(`
`);for(let s=0;s<h.length;s++)[f,p].includes(s)||(g+=h[s].replace(/\s\s/,"")+`
`);return g}const u=I(),l=$(o.getSource,[]);async function m(t){const r=await l;!n.length&&D(r.map(a=>({name:a.name,title:a.title})));const d=r.find(a=>a.name===t)||r[0],{exec:f,code:p,demo:g,readme:h}=d,s={code:p,demo:x(g),readme:h};c.state.codeLanguage==="js"&&(s.code=E(p),s.demo=E(s.demo)),b(s),q(()=>{u.current.clear();const a=document.getElementById("container");a.innerHTML="",a.setAttribute("style",""),f&&f()})}const S=B();v(()=>S.monitor(async t=>{if(!t.path.startsWith(o.path))return;const r=t.path.replace(o.path+"/","");m(r)}),[]);const[R,T]=y(!0);v(()=>{if(R){T(!1);return}const t=S.current.path.replace(o.path+"/","");m(t)},[c.state.codeLanguage]);const[j,w]=y(!1),C=()=>e("ul",{className:N.navigation},...n.map(t=>e("li",null,e(O,{className:"text-ellipsis",to:`${o.path}/${t.name}`},t.title||t.name)))),k=L(U);return v(()=>{n.length&&k.dispatch({type:"menuSet",payload:C()})},[n]),v(()=>()=>{k.dispatch({type:"menuClear"})},[]),e(A,{className:N.sourceCodeDemo},e("aside",null,C()),e("section",{className:N.content},e("h2",null,"Preview"),e("div",{className:N.preview},e("div",{id:"container"}),e(W,{ref:u})),e(_,{visible:j,onClose:w,title:"源码实现",style:"width: 1000px"},e(M,{value:i.code})),e("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},e("h2",null,"Use"),e("a",{onclick:()=>w(!0)},"源码实现")),e(M,{value:i.demo}),e("h2",null),e(V,{text:i.readme})))}export{se as S};
